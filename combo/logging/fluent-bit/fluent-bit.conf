[SERVICE]
    Flush        1
    Daemon       Off
    Log_Level    info
    Parsers_File /fluent-bit/etc/parsers.conf

[INPUT]
    Name              tail
    Path              /var/lib/docker/containers/*/*-json.log
    Tag               docker.*
    Parser            docker
    Mem_Buf_Limit     50MB
    Skip_Long_Lines   On

# 可选：把 docker 元数据打上去（容器名/镜像等）
[FILTER]
    Name                kubernetes
    Match               docker.*
    Kube_URL            https://kubernetes.default.svc:443
    Kube_Tag_Prefix     docker.var.lib.docker.containers.
    Merge_Log           On
    Keep_Log            Off
    Labels              Off
    Annotations         Off
    # 注意：这里在纯 docker 环境下 kubernetes filter 不一定可用
    # 如果你不在 k8s，建议删掉整个 FILTER 段，避免误导。

[OUTPUT]
    Name  es
    Match docker.*
    Host  elasticsearch
    Port  9200
    Index fluentbit-docker
    Suppress_Type_Name On
